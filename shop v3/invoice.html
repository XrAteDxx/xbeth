<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Invoices | My Shop Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="invoice.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn-font@v35.0.1/dist/font-face.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <button class="burger" id="burger"><i class="fas fa-bars"></i></button>
    <div id="sidebar-placeholder"></div>
    <div class="main-content" id="main-content">
        <div class="dashboard-head">
            <h1>New Invoice</h1>
        </div>
        <div class="invoice-section">
            <form id="invoiceForm" class="invoice-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="invoiceType">Type</label>
                        <select id="invoiceType" name="invoiceType" required>
                            <option value="sell">Sell</option>
                            <option value="buy">Buy</option>
                            <option value="expenses">Expenses</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="invoiceDate">Date</label>
                        <input type="date" id="invoiceDate" name="invoiceDate" required>
                    </div>
                </div>
                <div class="form-row" id="customerRow">
                    <div class="form-group">
                        <label for="invoiceCustomer">Customer</label>
                        <input type="text" id="invoiceCustomer" name="invoiceCustomer">
                    </div>
                </div>
                <div class="form-row" id="supplierRow" style="display:none;">
                    <div class="form-group">
                        <label for="invoiceSupplier">Supplier</label>
                        <input type="text" id="invoiceSupplier" name="invoiceSupplier">
                    </div>
                </div>
                <!-- Sell Items Table -->
                <div id="sellItemsSection">
                    <h3>Invoice Items</h3>
                    <div class="invoice-items-table-wrapper">
                        <table class="invoice-items-table" id="sellItemsTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Quantity</th>
                                    <th>Purchase Price (per)</th>
                                    <th>Sell Price (per)</th>
                                    <th>Total Purchase</th>
                                    <th>Total Sell</th>
                                    <th>Remove</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                        <button type="button" class="add-item-btn" id="addSellItemBtn">
                            <i class="fas fa-plus"></i> Add Item
                        </button>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Total Purchase</label>
                            <input type="text" id="sellTotalPurchase" name="sellTotalPurchase" readonly>
                        </div>
                        <div class="form-group">
                            <label>Total Sell</label>
                            <input type="text" id="sellTotalSell" name="sellTotalSell" readonly>
                        </div>
                    </div>
                </div>
                <!-- Buy Items Table -->
                <div id="buyItemsSection" style="display:none;">
                    <h3>Buy Items</h3>
                    <div class="invoice-items-table-wrapper">
                        <table class="invoice-items-table" id="buyItemsTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Quantity</th>
                                    <th>Purchase Price (per)</th>
                                    <th>Total Purchase</th>
                                    <th>Remove</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                        <button type="button" class="add-item-btn" id="addBuyItemBtn">
                            <i class="fas fa-plus"></i> Add Item
                        </button>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Total Purchase</label>
                            <input type="text" id="buyTotalPurchase" name="buyTotalPurchase" readonly>
                        </div>
                    </div>
                </div>
                <!-- Expenses Section for Expenses Type -->
                <div id="expensesSection" style="display:none;">
                    <div class="form-group">
                        <label for="expensesCost">Total Expenses</label>
                        <input type="number" id="expensesCost" name="expensesCost" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="expensesDescription">Description</label>
                        <textarea id="expensesDescription" name="expensesDescription" rows="3" style="resize:vertical;" dir="rtl" lang="fa"></textarea>
                    </div>
                </div>
                <div class="modal-actions">
                    <div style="display: flex; gap: 18px; align-items: flex-end;">
                        <div class="form-group" style="margin-bottom:0;">
                            <label for="invoiceStatus">Status</label>
                            <select id="invoiceStatus" name="invoiceStatus" required>
                                <option value="pending">Pending</option>
                                <option value="paid">Paid</option>
                                <option value="unpaid">Unpaid</option>
                            </select>
                        </div>
                        <div class="form-group" id="amountPaidGroup" style="display:none; margin-bottom:0;">
                            <label for="amountPaid">Amount Paid</label>
                            <input type="number" id="amountPaid" name="amountPaid" min="0" step="0.01">
                        </div>
                    </div>
                    <button type="submit" class="save-btn"><i class="fas fa-save"></i> Save Invoice</button>
                </div>
            </form>
        </div>
    </div>
    <script src="sidebar.js"></script>
    <script src="invoice.js"></script>
    <script>
      fetch('sidebar.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('sidebar-placeholder').innerHTML = html;
          sidebarInit();
        });
    </script>
</body>
</html>