<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Customers | My Shop Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="persian-clock.css">
    <link rel="stylesheet" href="customers.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn-font@v35.0.1/dist/font-face.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <button class="burger" id="burger"><i class="fas fa-bars"></i></button>
    <div id="sidebar-placeholder"></div>
    <div class="main-content" id="main-content">
        <div class="dashboard-head">
            <h1>Customers</h1>
            <div id="persian-clock-placeholder"></div>
        </div>
        <div class="customers-section">
            <div class="customers-header">
                <button class="add-customer-btn" id="addCustomerBtn">
                    <i class="fas fa-user-plus"></i> Add Customer
                </button>
            </div>
            <div class="customers-table-wrapper">
                <table class="customers-table" id="customersTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Address</th>
                            <th>Total Spend</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows are dynamically rendered -->
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Modal for add/edit customer -->
        <div class="modal-overlay" id="customerModalOverlay" style="display:none;">
            <div class="modal" id="customerModal">
                <div class="modal-header">
                    <h2 id="customerModalTitle">Add Customer</h2>
                    <button class="close-modal" id="closeCustomerModal">&times;</button>
                </div>
                <form id="customerForm">
                    <div class="form-group">
                        <label for="customerName">Name <span style="color:#e53e3e">*</span></label>
                        <input type="text" id="customerName" name="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Phone</label>
                        <input type="tel" id="customerPhone" name="customerPhone" pattern="[0-9]{11}">
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">Address</label>
                        <input type="text" id="customerAddress" name="customerAddress">
                    </div>
                    <div class="form-group">
                        <label for="customerSpend">Total Spend</label>
                        <input type="number" id="customerSpend" name="customerSpend" min="0" step="0.01">
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="save-btn"><i class="fas fa-save"></i> Save</button>
                        <button type="button" class="cancel-btn" id="cancelCustomerModal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="sidebar.js"></script>
    <script src="persian-clock.js"></script>
    <script src="customers.js"></script>
    <script>
      fetch('sidebar.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('sidebar-placeholder').innerHTML = html;
          sidebarInit();
        });

      fetch('persian-clock.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('persian-clock-placeholder').innerHTML = html;
          if (typeof initPersianClock === "function") initPersianClock();
        });
    </script>
</body>
</html>